:root{
  --primary:#5c6bc0;--primary-dark:#3f51b5;
  --danger:#e74c3c;--danger-dark:#c0392b;
  --bg:#f4f6f9;--card:#fff;--text:#333;
  --gray:#bbb;--light:#eee;
}
[data-theme="dark"]{
  --bg:#121212;--card:#1e1e1e;--text:#e0e0e0;
  --gray:#777;--light:#333;
}
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif}
body{background:linear-gradient(135deg,var(--primary),#a777e4);min-height:100vh;color:var(--text);padding:2rem;transition:background .3s}
.container{max-width:620px;margin:auto;background:var(--card);border-radius:16px;box-shadow:0 12px 36px rgba(0,0,0,.15);overflow:hidden;position:relative}
header{background:var(--primary);color:#fff;padding:1.5rem;text-align:center;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}
header h1{font-size:1.9rem;font-weight:600;flex:1;text-align:left}
.user-area{display:flex;gap:10px;align-items:center;font-size:0.9rem;flex-wrap:wrap}
.user-email{background:rgba(255,255,255,0.2);padding:6px 12px;border-radius:20px;font-size:0.85rem}
.logout-btn{background:transparent;color:#fff;border:none;font-size:1rem;cursor:pointer;transition:0.2s}
.logout-btn:hover{transform:scale(1.1)}
.theme-toggle{cursor:pointer;font-size:1.2rem;transition:0.2s}
.theme-toggle:hover{transform:rotate(20deg)}
.input-area{padding:1.5rem;display:flex;gap:10px;border-bottom:1px solid var(--light)}
#taskInput{flex:1;padding:12px;font-size:1rem;border:2px solid var(--light);border-radius:8px;outline:none;transition:border .2s}
#taskInput:focus{border-color:var(--primary)}
#dueDate{padding:12px;border:2px solid var(--light);border-radius:8px;font-size:1rem}
#addBtn{padding:12px 22px;background:var(--primary);color:#fff;border:none;border-radius:8px;font-size:1rem;cursor:pointer;transition:.2s}
#addBtn:hover{background:var(--primary-dark);transform:translateY(-2px)}
.stats{padding:0 1.5rem .5rem;color:var(--gray);font-size:.9rem}
.tasks{padding:0 1rem 1rem;max-height:420px;overflow-y:auto}
.task-item{display:flex;align-items:center;padding:12px;background:var(--bg);border-radius:8px;margin-bottom:10px;transition:.2s;position:relative;animation:slideIn 0.3s ease}
@keyframes slideIn{from{opacity:0;transform:translateX(-20px)}to{opacity:1;transform:translateX(0)}}
.task-item:hover{background:var(--light);transform:translateX(5px)}
.task-item input[type="checkbox"]{margin-right:12px;transform:scale(1.3);cursor:pointer}
.task-text{flex:1;font-size:1rem;cursor:pointer;word-break:break-word}
.task-text.completed{text-decoration:line-through;color:var(--gray)}
.due{display:inline-block;margin-left:8px;font-size:.8rem;color:var(--primary);background:rgba(92,107,192,0.1);padding:2px 8px;border-radius:12px}
.delete-btn{background:var(--danger);color:#fff;border:none;padding:6px 10px;border-radius:6px;cursor:pointer;transition:.2s;margin-left:8px}
.delete-btn:hover{background:var(--danger-dark);transform:scale(1.05)}
.empty-state{text-align:center;padding:2.5rem;color:var(--gray);font-style:italic}
.empty-state i{font-size:3rem;margin-bottom:.5rem;display:block;opacity:0.5}
footer{text-align:center;padding:1rem;color:var(--gray);font-size:.9rem}
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);justify-content:center;align-items:center;z-index:1000}
.modal.active{display:flex}
.modal-content{background:var(--card);padding:2rem;border-radius:12px;width:90%;max-width:400px;box-shadow:0 10px 30px rgba(0,0,0,0.2);text-align:center}
.modal h2{margin-bottom:1rem;color:var(--text)}
.modal input{margin:10px 0;width:100%;padding:12px;border:2px solid var(--light);border-radius:8px;font-size:1rem;color:var(--text);background:var(--card)}
.modal button{width:100%;padding:12px;margin:8px 0;border:none;border-radius:8px;font-size:1rem;cursor:pointer;transition:0.2s}
.btn-primary{background:var(--primary);color:white}
.btn-primary:hover{background:var(--primary-dark);transform:translateY(-2px)}
.switch-mode{color:var(--primary);cursor:pointer;text-decoration:underline;font-size:0.9rem}
.switch-mode:hover{opacity:0.8}
.spinner{margin:1.5rem auto;width:32px;height:32px;border:4px solid var(--light);border-top-color:var(--primary);border-radius:50%;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.error-message{color:#e74c3c;font-size:0.9rem;margin-top:10px;display:none}
.error-message.show{display:block}
@media (max-width:480px){
  .input-area{flex-wrap:wrap}
  #dueDate{width:100%;margin-top:8px}
  header{flex-direction:column;gap:10px}
  header h1{text-align:center}
}