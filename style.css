:root{--primary:#447F98;--primary-dark:#2a4f63;--accent:#629B86;--danger:#e74c3c;--danger-dark:#c0392b;--bg:#F0F7FB;--card:#FFFFFF;--text:#333;--gray:#999;--light:#E8F0F5;--border:#E0E8ED;--turquoise:#447F98;--slate:#629B86;--platinum:#DADEE1;--glacier:#B90E1;--ice:#D6E8F3}

[data-theme="dark"]{--bg:#0F1A1F;--card:#1A2A33;--text:#E8F0F5;--gray:#888;--light:#2A3F4F;--border:#2A3F4F}

*{margin:0;padding:0;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Helvetica Neue',sans-serif}

body{
  background:linear-gradient(135deg,var(--ice),var(--platinum));
  min-height:100vh;
  color:var(--text);
  padding:2rem 1rem;
  transition:background .3s
}

.container{
  max-width:700px;
  margin:auto;
  background:var(--card);
  border-radius:24px;
  box-shadow:0 20px 60px rgba(68,127,152,0.15);
  overflow:hidden;
  display:flex;
  flex-direction:column;
  height:90vh;
  max-height:800px
}

/* Header */
header{
  background:linear-gradient(135deg,#447F98,#629B86);
  color:#fff;
  padding:2rem;
  display:flex;
  justify-content:space-between;
  align-items:center;
  flex-wrap:wrap;
  gap:1rem;
  flex-shrink:0
}

header h1{
  font-size:1.8rem;
  font-weight:700;
  letter-spacing:-0.5px
}

.user-area{
  display:flex;
  gap:12px;
  align-items:center;
  font-size:0.9rem;
  flex-wrap:wrap
}

.user-email{
  background:rgba(255,255,255,0.25);
  padding:8px 14px;
  border-radius:20px;
  font-size:0.85rem;
  font-weight:500;
  backdrop-filter:blur(10px)
}

.logout-btn,
.back-home-btn,
.theme-toggle{
  background:rgba(255,255,255,0.15);
  color:#fff;
  border:none;
  font-size:1rem;
  cursor:pointer;
  transition:all 0.2s;
  padding:8px 12px;
  border-radius:6px;
  font-weight:500
}

.logout-btn:hover,
.back-home-btn:hover,
.theme-toggle:hover{
  background:rgba(255,255,255,0.35);
  transform:translateY(-2px)
}

.back-home-btn{
  text-decoration:none;
  display:inline-flex;
  align-items:center;
  gap:4px
}

/* Input Area */
.input-area{
  padding:1.5rem 2rem;
  display:flex;
  gap:12px;
  border-bottom:1px solid var(--border);
  flex-shrink:0;
  background:var(--card);
  flex-wrap:wrap
}

#taskInput{
  flex:1;
  min-width:150px;
  padding:12px 16px;
  font-size:1rem;
  border:2px solid var(--border);
  border-radius:12px;
  outline:none;
  background:var(--bg);
  color:var(--text);
  transition:all 0.2s
}

#taskInput:focus{
  border-color:var(--primary);
  background:var(--card);
  box-shadow:0 0 0 3px rgba(68,127,152,0.1)
}

#taskInput::placeholder{
  color:var(--gray)
}

#dueDate{
  padding:12px 16px;
  border:2px solid var(--border);
  border-radius:12px;
  font-size:0.95rem;
  background:var(--bg);
  color:var(--text);
  cursor:pointer;
  transition:all 0.2s;
  min-width:130px
}

#dueDate:focus{
  border-color:var(--primary);
  box-shadow:0 0 0 3px rgba(68,127,152,0.1)
}

#addBtn{
  padding:12px 28px;
  background:linear-gradient(135deg,#447F98,#629B86);
  color:#fff;
  border:none;
  border-radius:12px;
  font-size:1rem;
  font-weight:600;
  cursor:pointer;
  transition:all 0.2s;
  box-shadow:0 4px 12px rgba(68,127,152,0.2);
  white-space:nowrap
}

#addBtn:hover{
  background:linear-gradient(135deg,#2a4f63,#3d7469);
  transform:translateY(-2px);
  box-shadow:0 6px 16px rgba(68,127,152,0.3)
}

#addBtn:active{
  transform:translateY(0)
}

/* Stats */
.stats{
  padding:1rem 2rem;
  color:var(--gray);
  font-size:0.9rem;
  font-weight:600;
  background:var(--card);
  border-bottom:1px solid var(--border);
  flex-shrink:0
}

/* Tasks Container */
.tasks{
  flex:1;
  overflow-y:auto;
  padding:1.5rem 2rem;
  display:flex;
  flex-direction:column;
  gap:10px
}

.tasks::-webkit-scrollbar{
  width:6px
}

.tasks::-webkit-scrollbar-track{
  background:transparent
}

.tasks::-webkit-scrollbar-thumb{
  background:var(--light);
  border-radius:3px
}

.tasks::-webkit-scrollbar-thumb:hover{
  background:var(--gray)
}

/* Task Item */
.task-item{
  display:flex;
  align-items:center;
  padding:14px 16px;
  background:var(--bg);
  border:1px solid var(--border);
  border-radius:12px;
  transition:all 0.2s;
  gap:12px
}

.task-item:hover{
  background:var(--card);
  border-color:var(--primary);
  box-shadow:0 4px 12px rgba(68,127,152,0.1);
  transform:translateX(4px)
}

.task-item input[type="checkbox"]{
  width:20px;
  height:20px;
  cursor:pointer;
  accent-color:var(--primary);
  flex-shrink:0
}

.task-text{
  flex:1;
  font-size:0.95rem;
  cursor:pointer;
  word-break:break-word;
  color:var(--text);
  line-height:1.4
}

.task-text.completed{
  text-decoration:line-through;
  color:var(--gray);
  opacity:0.7
}

.due{
  display:inline-block;
  font-size:0.75rem;
  color:var(--primary);
  background:rgba(68,127,152,0.12);
  padding:4px 10px;
  border-radius:14px;
  white-space:nowrap;
  font-weight:600;
  flex-shrink:0
}

.delete-btn{
  background:rgba(231,76,60,0.15);
  color:var(--danger);
  border:none;
  padding:6px 12px;
  border-radius:8px;
  cursor:pointer;
  font-size:0.85rem;
  font-weight:600;
  transition:all 0.2s;
  flex-shrink:0
}

.delete-btn:hover{
  background:var(--danger);
  color:#fff;
  transform:scale(1.05)
}

/* Empty State */
.empty-state{
  text-align:center;
  padding:3rem 2rem;
  color:var(--gray);
  font-style:italic;
  font-size:1rem
}

/* Footer */
footer{
  padding:1.5rem 2rem;
  text-align:center;
  color:var(--gray);
  font-size:0.85rem;
  border-top:1px solid var(--border);
  background:var(--card);
  flex-shrink:0
}

/* Modal */
.modal{
  display:none;
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.7);
  justify-content:center;
  align-items:center;
  z-index:1000;
  backdrop-filter:blur(4px)
}

.modal.active{
  display:flex
}

.modal-content{
  background:var(--card);
  padding:2.5rem;
  border-radius:20px;
  width:90%;
  max-width:420px;
  text-align:center;
  box-shadow:0 20px 60px rgba(0,0,0,.3);
  animation:modalSlide 0.3s ease-out
}

@keyframes modalSlide{
  from{
    opacity:0;
    transform:translateY(-30px)
  }
  to{
    opacity:1;
    transform:translateY(0)
  }
}

.modal-content h2{
  font-size:1.5rem;
  margin-bottom:1.5rem;
  color:var(--text);
  font-weight:700
}

.modal input{
  width:100%;
  padding:14px;
  margin:12px 0;
  border:2px solid var(--border);
  border-radius:12px;
  font-size:1rem;
  background:var(--bg);
  color:var(--text);
  transition:all 0.2s;
  outline:none
}

.modal input:focus{
  border-color:var(--primary);
  box-shadow:0 0 0 3px rgba(68,127,152,0.1)
}

.modal input::placeholder{
  color:var(--gray)
}

.modal p{
  margin:1.5rem 0 0;
  font-size:0.9rem;
  color:var(--gray)
}

.btn-primary{
  width:100%;
  padding:14px;
  background:linear-gradient(135deg,#447F98,#629B86);
  color:white;
  border:none;
  border-radius:12px;
  cursor:pointer;
  font-weight:600;
  font-size:1rem;
  margin-top:1rem;
  transition:all 0.2s;
  box-shadow:0 4px 12px rgba(68,127,152,0.2)
}

.btn-primary:hover{
  background:linear-gradient(135deg,#2a4f63,#3d7469);
  transform:translateY(-2px);
  box-shadow:0 6px 16px rgba(68,127,152,0.3)
}

.switch-mode{
  color:var(--primary);
  cursor:pointer;
  text-decoration:underline;
  font-weight:600;
  transition:color 0.2s
}

.switch-mode:hover{
  color:var(--primary-dark)
}

#authForm,
#authLoading{
  display:flex;
  flex-direction:column
}

.spinner{
  margin:1.5rem auto;
  width:40px;
  height:40px;
  border:4px solid var(--light);
  border-top-color:var(--primary);
  border-radius:50%;
  animation:spin 1s linear infinite
}

@keyframes spin{
  to{transform:rotate(360deg)}
}

.error-message{
  color:var(--danger);
  font-size:0.9rem;
  margin-top:12px;
  display:none;
  font-weight:500
}

.error-message.show{
  display:block
}

/* Responsive */
@media (max-width:768px){
  body{
    padding:1rem
  }

  .container{
    height:auto;
    max-height:none;
    border-radius:20px
  }

  header{
    padding:1.5rem;
    flex-direction:column;
    text-align:center
  }

  header h1{
    font-size:1.5rem
  }

  .user-area{
    justify-content:center;
    width:100%
  }

  .input-area{
    padding:1.5rem;
    flex-direction:column
  }

  #taskInput,
  #dueDate,
  #addBtn{
    width:100%
  }

  .tasks{
    padding:1rem 1.5rem;
    max-height:300px
  }

  .task-item{
    flex-wrap:wrap;
    padding:12px
  }

  .due,
  .delete-btn{
    width:100%;
    margin-top:8px;
    text-align:center
  }

  .modal-content{
    width:95%;
    padding:2rem
  }
}

@media (max-width:480px){
  header h1{
    font-size:1.3rem
  }

  .user-area{
    font-size:0.8rem;
    gap:8px
  }

  .user-email{
    padding:6px 10px;
    font-size:0.75rem
  }

  .input-area{
    gap:8px
  }

  #taskInput,
  #dueDate,
  #addBtn{
    padding:10px 12px;
    font-size:0.9rem
  }

  .stats{
    padding:0.8rem 1.5rem;
    font-size:0.85rem
  }
}