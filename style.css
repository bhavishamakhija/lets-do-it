:root{--primary:#5c6bc0;--primary-dark:#3f51b5;--danger:#e74c3c;--danger-dark:#c0392b;--bg:#f4f6f9;--card:#fff;--text:#333;--gray:#bbb;--light:#eee}
[data-theme="dark"]{--bg:#121212;--card:#1e1e1e;--text:#e0e0e0;--gray:#777;--light:#333}
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif}
body{background:linear-gradient(135deg,var(--primary),#a777e4);min-height:100vh;color:var(--text);padding:2rem;transition:background .3s}
.container{max-width:620px;margin:auto;background:var(--card);border-radius:16px;box-shadow:0 12px 36px rgba(0,0,0,.15);overflow:hidden}
header{background:var(--primary);color:#fff;padding:1.5rem;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}
header h1{font-size:1.9rem;font-weight:600;flex:1;text-align:left}
.user-area{display:flex;gap:10px;align-items:center;font-size:0.9rem}
.user-email{background:rgba(255,255,255,0.2);padding:6px 12px;border-radius:20px;font-size:0.85rem}
.logout-btn,.theme-toggle{background:transparent;color:#fff;border:none;font-size:1rem;cursor:pointer;transition:0.2s}
.logout-btn:hover,.theme-toggle:hover{transform:scale(1.1)}
.input-area{padding:1.5rem;display:flex;gap:10px;border-bottom:1px solid var(--light)}
#taskInput{flex:1;padding:12px;font-size:1rem;border:2px solid var(--light);border-radius:8px;outline:none}
#taskInput:focus{border-color:var(--primary)}
#dueDate,#addBtn{padding:12px;border:2px solid var(--light);border-radius:8px;font-size:1rem}
#addBtn{background:var(--primary);color:#fff;border:none;cursor:pointer}
#addBtn:hover{background:var(--primary-dark)}
.stats,.tasks,.footer{padding:0 1.5rem .5rem;color:var(--gray);font-size:.9rem}
.tasks{max-height:420px;overflow-y:auto}
.task-item{display:flex;align-items:center;padding:12px;background:var(--bg);border-radius:8px;margin-bottom:10px;transition:.2s}
.task-item:hover{background:var(--light);transform:translateX(5px)}
.task-item input[type="checkbox"]{margin-right:12px;transform:scale(1.3);cursor:pointer}
.task-text{flex:1;font-size:1rem;cursor:pointer;word-break:break-word}
.task-text.completed{text-decoration:line-through;color:var(--gray)}
.due{display:inline-block;margin-left:8px;font-size:.8rem;color:var(--primary);background:rgba(92,107,192,0.1);padding:2px 8px;border-radius:12px}
.delete-btn{background:var(--danger);color:#fff;border:none;padding:6px 10px;border-radius:6px;cursor:pointer;margin-left:8px}
.delete-btn:hover{background:var(--danger-dark)}
.empty-state{text-align:center;padding:2.5rem;color:var(--gray);font-style:italic}
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);justify-content:center;align-items:center;z-index:1000}
.modal.active{display:flex}
.modal-content{background:var(--card);padding:2rem;border-radius:12px;width:90%;max-width:400px;text-align:center;box-shadow:0 10px 30px rgba(0,0,0,0.2)}
.modal input{width:100%;padding:12px;margin:10px 0;border:2px solid var(--light);border-radius:8px;font-size:1rem;background:var(--card);color:var(--text)}
.btn-primary{width:100%;padding:12px;background:var(--primary);color:white;border:none;border-radius:8px;cursor:pointer}
.btn-primary:hover{background:var(--primary-dark)}
.switch-mode{color:var(--primary);cursor:pointer;text-decoration:underline}
.spinner{margin:1.5rem auto;width:32px;height:32px;border:4px solid var(--light);border-top-color:var(--primary);border-radius:50%;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.error-message{color:#e74c3c;font-size:0.9rem;margin-top:10px;display:none}
.error-message.show{display:block}
@media (max-width:480px){.input-area{flex-wrap:wrap}#dueDate{width:100%;margin-top:8px}header{flex-direction:column}header h1{text-align:center}}